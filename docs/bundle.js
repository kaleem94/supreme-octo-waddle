(()=>{"use strict";var e,t,o,n,r={860:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{A:()=>e});var r=o(413);console.log("./"+r.K+"/block_definition.json");var c=await fetch("./"+r.K+"/block_definition.json").then((e=>e.text()));const e=JSON.parse(c);n()}catch(e){n(e)}}),1)},672:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{A:()=>e});var r=o(413),c=await fetch("./"+r.K+"/block_gen_definition.json").then((e=>e.text()));const e=JSON.parse(c);n()}catch(e){n(e)}}),1)},908:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var n=o(860),r=e([n]);n=(r.then?(await r)():r)[0],Blockly.defineBlocksWithJsonArray(n.A),t()}catch(e){t(e)}}))},44:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var n=o(908),r=o(860),c=o(672),a=o(413),s=e([n,r,c]);[n,r,c]=s.then?(await s)():s;const d="jsonGeneratorWorkspace"+a.K;let p={};var l={};function y(){const e=JSON.stringify(l);window.localStorage.setItem(d+"_dropdowns",e)}function u(){const e=window.localStorage.getItem(d+"_dropdowns");e&&(l=JSON.parse(e))}const f=(e,t,o)=>{void 0===p[t]&&(p[t]={}),void 0===p[t][o]?p[t][o]=[e]:p[t][o].push(e)},m=()=>{for(const e in p)for(const t in p[e])for(const o of p[e][t])b(o,e,t);p={}},v=e=>{const t=Blockly.serialization.workspaces.save(e);window.localStorage?.setItem(d,JSON.stringify(t))},h=()=>{window.localStorage?.removeItem(d),location.reload()},g=e=>{const t=window.localStorage?.getItem(d);t&&(Blockly.Events.disable(),Blockly.serialization.workspaces.load(JSON.parse(t),e,!1),Blockly.Events.enable())},w=e=>Blockly.JavaScript.workspaceToCode(e),k=(e,t="generated_code.js")=>{const o=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},E=e=>{Blockly.svgResize(e)},b=(e,t,o)=>{const n=c.A[0].types[t];if(n.listHandler&&o in n.listHandler&&n&&n.listHandler[o]&&"updateDropdown"===n.listHandler[o])for(const t in n.updateDropdown){const o=e.getField(t);o.getValue();o.menuGenerator_=[],n.updateDropdown[t].forEach((e=>{void 0!==l[e]&&l[e].forEach((e=>{o.menuGenerator_.push([e,e])}))}))}},B=()=>{for(const e of r.A)if("extensions"in e){const t=e.extensions,o=e.type;t.forEach((e=>{Blockly.Extensions.register(e,(function(){b(this,o,e)}))}))}},_=(e,t,o)=>{let n="";const r=o.string.match(/(?:^|[^%])%(\d+)/g);let c=o.string;return r.forEach((t=>{const n=t.replace(/[\s%]/g,""),r=parseInt(n);if(isNaN(r))return"error generating code";const a=o.fields[r-1];" "===t[0]&&(t=t.replace(" ","")),c=c.replace(t,e.getFieldValue(a)),A(o,e,a)})),o.listHandler&&Object.keys(o.listHandler).forEach((o=>{f(e,t,o)})),n=c,n},S=(e,t)=>{const o=c.A[0].types[t];return n=>e(n,t,o)},L=()=>{for(let e in l)l.hasOwnProperty(e)&&delete l[e];c.A.forEach((e=>{const t=e.default_listings;Object.keys(t).forEach((e=>{l[e]=t[e]}))}))},O=()=>{console.log(c.A),c.A.forEach((e=>{const t=e.types;console.log(t),Object.keys(t).forEach((e=>{Blockly.JavaScript.forBlock[e]=S(_,e)}))}))},j=e=>{L();var t=w(e);y(),u(),m(),document.getElementById("codeOutput").textContent=t},x=e=>{w(e),e.addChangeListener((t=>{t.isUiEvent||t.type==Blockly.Events.FINISHED_LOADING||e.isDragging()||t.type==Blockly.Events.BlockField||t.type==Blockly.Events.BlockFieldIntermediateChange||t.type==Blockly.Events.BlockChange||t.type==Blockly.Events.UiBase||(v(e),j(e))})),g(e),j(e),E(e)},I=(e,t,o,n,r)=>{let c=!1;const a=a=>{if(!c)return;const s=t.getBoundingClientRect(),l=(a.clientX-s.left)/s.width*100;l<40||l>80||(o.style.width=`${l}%`,n.style.width=100-l+"%",e.style.left=`${l}%`,Blockly.svgResize(r))},s=()=>{c=!1,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)};e.addEventListener("mousedown",(()=>{c=!0,document.addEventListener("mousemove",a),document.addEventListener("mouseup",s)}))};function A(e,t,o){e.updateList&&Object.keys(e.updateList[o]).forEach((n=>{const r=e.updateList[o][n],c=t.getFieldValue(o);l[r].includes(c)||l[r].push(c)}))}var i;async function N(){u();const e=await fetch("./"+a.K+"/toolbox.json").then((e=>e.json()));i=Blockly.inject("blocklyDiv",{toolbox:e}),B(),O(),x(i),document.getElementById("saveButton").addEventListener("click",(()=>{const e=w(i);k(e)})),document.getElementById("deleteWorkspace").addEventListener("click",h),window.addEventListener("resize",(()=>E(i)));const t=document.getElementById("divider"),o=document.getElementById("container"),n=document.getElementById("blocklyDiv"),r=document.getElementById("codeContainer");I(t,o,n,r,i)}N(),t()}catch(C){t(C)}}))},413:(e,t,o)=>{o.d(t,{K:()=>n});const n="conf/"+(new URLSearchParams(window.location.search).get("lang")||"arm")}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var o=c[e]={exports:{}};return r[e](o,o.exports,a),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(r,c,a)=>{var s;a&&((s=[]).d=-1);var l,i,d,p=new Set,y=r.exports,u=new Promise(((e,t)=>{d=t,i=e}));u[t]=y,u[e]=e=>(s&&e(s),p.forEach(e),u.catch((e=>{}))),r.exports=u,c((r=>{var c;l=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var c=[];c.d=0,r.then((e=>{a[t]=e,n(c)}),(e=>{a[o]=e,n(c)}));var a={};return a[e]=e=>e(c),a}}var s={};return s[e]=e=>{},s[t]=r,s})))(r);var a=()=>l.map((e=>{if(e[o])throw e[o];return e[t]})),i=new Promise((t=>{(c=()=>t(a)).r=0;var o=e=>e!==s&&!p.has(e)&&(p.add(e),e&&!e.d&&(c.r++,e.push(c)));l.map((t=>t[e](o)))}));return c.r?i:a()}),(e=>(e?d(u[o]=e):i(y),n(s)))),s&&s.d<0&&(s.d=0)},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);a(44)})();